networks:
  mellonpass-network:
    name: mellonpass-network
    driver: bridge

volumes:
  mellonpass-postgres-data:
    driver: local
  mellonpass-tmp:
    driver: local

services:
  mellonpass_server: &mellonpass_server
    build:
      context: .
      args:
        POETRY_INSTALL_OPTS: '--no-root'
      target: local
      dockerfile: Dockerfile
    container_name: mellonpass_server
    restart: always
    stdin_open: true
    tty: true
    environment:
      - APP_ENVIRONMENT=local
      - DOMAIN=localhost
      # Persistent storage.
      - DATABASE_URL=postgres://postgres:postgres@mellonpass_db:5432/postgres
      # Django admin.
      - DJANGO_SUPERUSER_PASSWORD=admin
      - DJANGO_SUPERUSER_USERNAME=admin@example.com
      - DJANGO_SUPERUSER_EMAIL=admin@example.com
      - SECRET_KEY=django-insecure-secret-key
      # Test user.
      - TEST_USER_EMAIL=testuser@example.com
      # This raw password is related to the TEST_USER_LOGIN_HASH and TEST_USER_PROTECTED_SYMMETRIC_KEY values.
      # Raw password: v}}\a5X%pEPn7d$n<L@-
      - TEST_USER_LOGIN_HASH=11b0ca97c2a0f88bd4a0907729c38eca7224130ff09b8b42d81f163f4cb44363
      - TEST_USER_PROTECTED_SYMMETRIC_KEY=ZWY1ZjI3ODYyNDdiMGE4ZDMyYTY4Y2I0YWQ4ZWEzOTAxMmZlYmQyNzJlYWY1NTI5OTk5MGJmNDg0MTJlYTk3M2E1OGM4NDEwM2QzZWMwMjA3MjdiZTk3ZDA1NWNlN2Y0MzNhYWJmMzQ4YWYwOGZlNWZjYmIzN2Y1OWM5ODJkMjlkNTg5ZjkzNDRjYzM3MjkwZjE5OTFjODUxM2QzMjUxNTllNDBkMmZlMmEzMDdmZjA5YjVmYmNmOWQzYjNlYjZkMGEwMDU1ZGEyYjllZTFlZjliMmQwZTE5MDEyOGU4MDg=
      - TEST_USER_RSA_PROTECTED_PRIVATE_KEY=Y2YxZTExYjgyOGQxODM2ODlmMDI0OGM0NDE1MzgyODYxZTg3YjI5NDllZjk1MGMzMzExZWY2MjQ4YWIxNTU2NzA1YmRlZTJlNzU0MDM0MTA3YzFhZGFlYzg2YTUwZDQ2OTJhODBlZjRhZmI4MWUzNDViMThhNjk5OWJlYTMwYTE0YjQxMmNjYTMyNjZhMmI3OGE4M2ZhMWQzMDczNTBiMjE2OTFiODIwYjFlYTYzNTFkNGM1M2RhOTZiNTc1MWY0NzQyZTljNzAxMjc3NmFiN2Q4MzhiMGNiYjZhZGY4MThkNWE4YWRiOTc3YWYwZGNkMDRkNjBhZDEzYWI2ZjU4YjlkNTUzNWFiMTRiM2YzYjE5YmFjM2JiYmYxMmFkODQxMDhlNGUyOTRkODQzMGVhYTBkM2M1MDllZWM2OTNlZjJhN2RmMTI0YTk2Y2M0NDY0YmE3YjQyZTg0ZjJkYWE5MWEwMzc4YmQ5ZWQ0MDYwMzU0YTk1ZTgyOTIxZjM4MGNiMDdiODQxNmI5NGZiZTkxM2JlNTVmNzE0YzM1YjdmNzUyNzgzMjUyOGY3OWMwN2NhM2E4MzQyZmI5NGJiNmNhOTgyMDJkYjg0YzVmOWFjMmE4M2U3YWY1YjAzNzJjMTJiMzY5ZjI5NmI2ODI4MDVhOWY0NjE0MzhlMTEwMDA0ZDdhOTBlYTlmY2QxZjFkZDE0YzFhNzViMjdiM2EwM2NkMzk4ZTQzMDVkYWY4YjlhNzM2YzhkZWI5ZmU4NTI1MTQyOTU0YjVkMzg4ZjQ3YjFjYjg1NjEyZjcyNThiMGI1NzkyM2RkZDUzMmIzYjI5YTRjMDYxYjliOTc3OWI1NjdiYTM5N2VhNGY5NTZlYjAyYTBlMWE3ZDE4Y2IyMGRkOGZhNmQxYmEyNTY0ZWJhNTIwNWI2MmVlMTVkNDBlYjM0YTE5NjQyZGNlNjA0NjRlYjViNTk5OTA0NTUxMDUxZmY3MTBhMDU1OGRhMjFjNmI4Zjc4NWJhNDhhYzAyY2Y4MjA3MmYzZjkyOWE2ZmU2ZTI1NDgxZGJlNTFjNjIwZWY1OWVjOTkyZGJmMDRkYTA3MmM0ZmU3ZGQ1MTgyNTgzYTM4YTQ2MGFhZDI3NWYwZDM5YWVkMmY0NDdlMmY2MzA4MzI0OGNkOTI1ZTM3YzA3OWI3ZmIzM2Q2NzI2ZTdhMzExZTg5NzJlODFhMDgxODI3ZTE5N2ZlN2VkY2NlNzA0YWFhN2RkM2YyZDJmYjAxNzUzMjk4MTMzNGExMzE1ZGM1YmZkMDZkMDU2NmVjYjlhYjAwMjIzZWZiMmY4ZjMwNTRkNTNmNjFlMWI3ZTY5MDZmYjBlNzZhMWQwYmU3NzI3ODU0N2U3MGVjZjhhNmJlNjRjMTY1M2NlYWU5MDg2YTliNjc0OWY2ZGM2YWE1MDEzODkzZDBlYTU2NTFhMmIzNTRmOTg4ODMwMGU0YTc3NTEzMWVmNzlhNWQ5OTBmMzcxZWI5YTk1MzI1NDM2NmY5NjU2YWUyYjE0N2E5MzhkNWIyMGU4ZTdkODcyMjFmZTY0ZWIzNDczNDQwNTlmNTAzNTM1NzVhMzJhZDBmMmI2NmJhODQ2OTdkYzY0NzA5ODJlYWM4ZDgwMDY3YTk2YzhmODYyZjJlYTQ2ZjlmYjZlOTRiODFiY2M2MTZhYTFiMDE5MzcwZDE1ODJlZThhZTRjN2Y1MzA4NDNhN2IxMGUxZGY0OTllZTYyZDA0ZWExODBjN2YyNmU4NWQzNjI1ODY0ZjQ4ZGJiZDUyNGE4ZDdmMmMwOTg2YzU4ZWQyYzFlNTNmMDJiZmRhNzVmMWVlYmExMWY3OTYwZTk3NjllMzAzNzQ2YTM5OTUwNWFhZjY3YWRkZTcwYmEzODAxZjg5MGI3Yjg2ZGIzNGZjYzQwN2VkZDY4OGQ1ODk0ZjE3YzQ1Y2YyNzRkMTVmYzBjMWRiZGE4YWYwYTk1Nzk2ODNkYjE2ZDliMTI0Y2EyZDFkMGY2MzVhZTQ2MjJlZWFmNDYwNTI3YzhjOWI2NTBkZTBlODA3NjY3NGIxZmQyYmUwNDNhM2Q4MzMxMzFmNDM0Mjc4NTBiZTBmNTkzYTdkZjU2MWUyMDhjZDg0OGFjNjJhZWZkNjgyNGNhMTAzZWI2NmFmZTIxODMwMGM4OTRjNTQwYmQ0ZmRlZDIyOTcwNjQwNzZiNzkwODkzODBhMTNmMmQyY2RmMzI1YWM5M2U4NmMxY2FlNWYyNTg5ZGI2MzM0NjBjYWFmMzZhMTM4ZDAwNzQxNGE5OTg5ZDU1Y2ZlNmIzMjM3NzI4YTFlMzBjMzdlZTY1NmE2MmJjZTM2YTFmNTNkNjI0MGI2MGVlYjFlYzlkOTFhZmJjMzg2OTZmZmYxOTkxMWZmM2VjNDg4MmNmMWE1MTIwY2Q4ZTQ1MDdmMTE5ZjkwMjM2MzBkNDYzOWI0ZjU1ZTZhYzgzMGI4MGVkOTMzNGIyZGRkNjMxYjhmY2YwNDNmMGI5ZTk3OTkyYWQ1NTQxYzdjYjdjYzUyOTY5OTc4NTkyNDdhNTU4ZTEyZWM2NDYzOTlkNDI5ZjU0NmRjN2U4OWZmNGY0MjRlODRlZDM4YTczMTdlMGJkMjFjNjgzYzRiMzk4MjAyYTk0MGRhM2IyZTVjNTAwYTk1ZWQ1MzQ4YmQwYzI2NmU3ZTU2OTNmZmRlMzIyN2NjYWE0MjRkOTY5YjAyZTE4NTJkMTI0OGY1YzQzOTY5Y2YwYWIyMTc4YzJhMGFkMTFhYTExYzEwNzQxMTc4YWIyMTBkMjA5NjQ4MjU5NDhmMjhlZWRiMzZjZDNjZTIyMDQ3NDc0Nzc4NzMyYjZmN2M1YjE0OWJmZTVjMmJkOTNiZTg4NjU1YzZlMDhmNzE5YjVjN2FmNjFkNzZhZjBlZTFiZTdiN2M2N2I1NjM0OGY1ZDZkODI0OTg2YmRjNzlmM2Y1ZTExMzU3MzM1NzVmMmQ1MThlYmU1YTJlYmYwYThkYWVlMDI2ZTE2Mzc2YjBhMmMwMGFjOWYyNWExYWIwM2RiNzAwNWM1YzYwMDRmZTQyZmIxMjlkODk4Mzc2M2E4NjQ2NGM3MDU3MzM5MmM5YWQzYjg3MTc5NWQ0Y2RjYmE2YWM1YTZkNTMwY2RjZGU5NzViMjE1M2RiZWRmZjUwMjg5ZmIxY2E0Mzg2NzI2M2FlODNhZTUzYWYwNzA3YjRiMmMzZTFlZGNlMDJmOTViOTZjNzQ4ZmM3YWVkMDcwMjM3MGJiN2EyZjNhOTdlMGExOTNlZmI1Y2Q1NjZlNDg3NTBkYzljOGJkOTg5MWY4OTQ0NDFhYWU0Zjc4MTdhYmE4NTNmYjE3OWNkYWMwN2RkOGI5OGIxYTc2MDhiMmJmMjAyYzgyMjlmMWEwMDkzZWMxYzNkMjNiYWEwMjgxZGY5NjNhZDM0NmQ4NjI2M2QzZmQzZDY5M2NmZWNhODA5ZGMxYzNlOTI3Mjc0ZGY2NzAxMjBkNDcxYWRlOTkxMzg1MzJiNDcwYjEwM2UzZTRkZTUwZWJiYmRhOTM3MzNhYTdiNmFmMjVlZjEzYTJjYTg5ZjMzNGM5ZjZjOGJlYjZjMGUzMzQ4ZTI1ZjY4MjAxOTlkMTkxMjcxMTBlOGFjODE0MGU5MGUyMWNhNjkzMGVjZmQxMDU0N2FiMzNhMTllOTE0NGZkZDdlNWFkMjE2OGYxY2NhYThjZTljMTdmYTcxMTQzNWI0MjU1NGIxMmE3OWM1OWIxN2I1NmI1OWRjNWY3Njg5ZWRjODAwMTFhYWJkYzBlN2JlZjI3OWVmYmFjN2UzOThiOTNjOTE2NTFiMGQ3ZjliM2M2ZjE0ZDlkZmVlMTg5Yjk2ZGY3ZDU1NDQzYmRkYzU2ZmUyODkxMjgwYTliMDljNTcyOTUyNmU5YjhhNmQ2MTJhNzI5NGNmNjU2NWY3MWM0MWJkYWYzNjY3OGIyYzU5MGJkZTJhMzU1NTlmN2IwODJlZmM3Yjk2MzQ5MjhlMTBjMGVhMjExOGQzY2QzMmJiYzEyZWZjNjQxODUwNWY0NzQ5YWQwODI0YzFhNmZiYjFiNDhkNDZlZDg5NDYxOWY1MGZmNmY5MzE0NGZhZmViN2UwN2YyNWNlMjI3NDRmZDYyODFkZmM0N2JlMTgxMjViMzdhNzkwZTU4NmRjZGZhOTg0YWMwYmFmNjQwMzNhNTBiOWJkODRmYTUxMDE0MDkwZmQyMGE1ZTBkNGNkZDMxZjhhZWZlZmQyMTRiYzY0YzZiNmFiZDFkOTFiOGI5MjcwZDljNDFmMmZhZGM2Zjg1OTcxOWNmZjVmY2YxOWFiNWM0YzY4NGJjYWM3MmU5OGNkODA1MDEyZWFjN2E3MDI1Y2E1OTVhYzNhYWNkZWE2YWU4NzU4ZjA4MzUyZjQ1NmM1NTEzNjVkYTYyOTQxNjY0ZWFjYjRiNzkxODA0MzIyMjBmZjM2Y2MzMDViOTYyMDA1MDE4ZmFhYTBiOWY5NTgyMWY2NTk2MzJmNDE0MWUyYmYwODI5ODBlZDAyNGQ3ZWM5NDUwNmFhOTZlOWY1ODM0MThmNzA2MmI0NDIyOWU2M2NkNmYxZTc4M2E5YTgzN2MyNzE2MTVmNzJmYjA5MDA0MmZlYThiM2M3YTcwMTY3M2Y1NGM0ZWZmODgxYTY0MjYyMGUwMDE0N2Y3MzhjZWQ3ZDcyNjZkZTBiOGNjMjdlYTc4NGIyYTMxZWU4OGEzNmQ5N2Y5NzcyMGM1MjI3MDkyYTVjZTU0ODBmMWEzNzQyMTU2MzYxMGZlNGU3OWQ3N2MzMzBiNzM2MWYxYmUwNGNjY2I2YjQ3NDBmZTgxOGQ3YmU0NTE4YTAzNjI5NmI4MTllOGJhOWNhZGE3ZDg5ZjMwMTUwYmEzNjUxODEwMTliZWMyOGEzMTJkZjA3ZDE3NzM3NmMwZWY2ZjVjMTcyM2U5ZjNjOGYwMWQ0ZDE2OWFmOGFjYzBjN2M5YzE2OGM5ZTVmYjIyMzMxMDdjZDRhN2M2ZjMwYmQ5Mzk0Nzk2NzcyOWZlZjZkNjEzNTkxNDZmNGIxNDk4MzIyZTRlZWJkZDM3NGQxNWNmYzBjZmUyNGE4OTRmMGIyNTYyZTJhY2QzZWEyY2EzZDUwOThmYjg0YjVkODU1ODZhMjVjMzI2YjBiN2JiZDJiYmE2ZjlhM2Y0MWY1MjQ4NzIxMDJiMGEwY2FmZGVmMjQ5YWIwNjNlNzdkYTlmZWUzYzc2ZWJkMDczY2JlYjU4ODU3MDMwY2NiY2UyYjFiODVlNzA4NjdkMTE1OTJhYTI5ZmVkMTViMGNhYTMwYjY2NzU1ODE4YmFmYTZkNjExYmY3NzY1ZGNhY2FiYmYxOTNkZDVjYmQ1ZDJkMzUzOTkwNWVmZDQwZWUyZmZlMzU1ZjI3MWYwODFiZDFmZWNmNjc0YmEwZDMxMDgwOGNkOGJhNjZkNzMwMjUyNTlkOWE3NjdhNjJjYjllNTliNzM3YjBiNTMwMTE3MjNiMDZkNGUzMjBkYzU2YzI4NjNmZmIyZjY1NTY4YWM1YWUyMzU2YTYyYTcxYzYwMmFiYTcxOGJmNzdkOGIxNTNmYzNmYmU4N2M2YjlhZDNhYjkzNjk1NDdkYWI4NjIwNGU4MDhmZjQ3YzQxZjAxYmM1YmEzNmNhM2FjZjIyODU5M2IzMjdmMGNlYTNiN2ZmMmRhMGQ3ZTUxY2FjZjRlZGMxNzg0Y2NiN2VjZmM2YzczMzRhNjNmZWU3NmI3YjhmOGMxYzBlMGJhMDFkZWEzMTZlZDI0ZTBkMTE5YzgwZGQyNWFjOTUyYzUyOWUyY2JjMGI0N2VkNzg3NDNkODg0NmFiMDE4ZmIwNWExOTM5NzFlMDc1MDJmNzQ1YjAzYmYxOGMwMDU3ZDRkZmZmZmE3N2IzYTFiYjdiZDA3MGNmOWUxYWY2ZTQxNmJlYzVkNWYyYTRhNDJjMmM4MmY5ZmE4ZjE5MjIzN2RjZjgyMjJjZDUyNjE2MGE5NjgyNmY4Nzc0ZTRjMDQ0NTg3YWVkYjg0NDFjNjllYmY4YzhjN2ZmOWY5Yzg2M2NlZmM5Y2E4MzYzZjk3OGQzMzI3ODIzNTJmYTViNjQ1M2NmMzBmYTQ3NzVkMzRlMmI3ZDliMTg4NzgyY2ZlNzNlYzkxMjgyMjIzODBlMWYyMjM0MGM2ZTBkMTlhNWFhYzM0MGY3ZTIwOTFiNzMwZjhmZDZhMTZhYjI0MmU1ZjFjOTBlNzNjZTQ2NTA0NDU5MDA5OTg4NzU3YTdlZGMxMjk5OTdiZGEwNjc5MDE2YmI1NWNmOTZhOGFkOTg1ZTU3NDVjZTY0MGM1Njg3MWI2ZDJjNTk5YmE3MTAxNWQwMWI4NTFmNzI1MmY5YjQyYWY0ZDBjNmI0NGYyOWU0MTljNDNlMmExMDk3MmU3YzVhNDljMmY4ODY2YmQxZTdkYzg2MzgwYTYyZTM4ZDdiMWFhMzljZTNlNjdjNzBlNzc1ZDI5NmViOThmYThmYmU4ODFhNDQ1MzAxMWZiMjE4YjIwNjlmMWQ1Zjc3ZmE2Y2Y3OTA4ZDc0N2Q4MWJlOGRhNGQ0N2FiNWFkZjhjMzU5MmYwNDEwNGU4Y2Q2OGMwMDNlNjA4NGRkN2JiZWNkMmRhMDEyN2FmOWMwNTk3MjgwZWUyNzRhYzc2ZTVhYjcyYzEyMTM0M2IyMTVhNDU0MWRiMjgxZDE1YzZiZmNjNWJhYzQyZjFiOWI1MWExM2Q1ODhlM2Q0YzI2ZTQ1MmRmMWIyMjEzNGJlMmE4YTA4NzQyMmIyZmJmZTMwZjViMjEzMjkwYWE1NjYyMzRiOWU4Mjk0ODFhYWE2OGZhMDhiMzYyODNkN2YwN2I5ODA3MmY4MDg2MmYxNmQzODU1ODI5ZDAwNjY2OGFlOGExMTgwODdkMDY1YmYzMzUzY2M0ODFhMTUzY2FjY2ZiNjVhNzEyYjZkOTUxMWRhNDBiMmE3MDQxYzZhNDU4MGU0Y2E1MWU2M2JkYmM1NzgxYmQzMzYwZDgzMTU2ZGRhNjZiMWI0ZGUwN2MzMjg1NTdjZDgzM2I0MmI1ZjdkMzQzOWNkZDNhYjc4OGYxMGYxMjM5MmQzMDgwODhjOGIxODZlYjhkYzAwOTJmM2MyODg1OTA1ZTFjNDgwZWQ0OWQyY2UxZTVjN2UzZjBlZWI3Yjk1NmE0OTUyM2ViOTQ5ZjA5NjliYjNkNTc1YTk5YTk2OTExNThlMDI3MzQ2MWRmODYyN2NlYjU5ZWE2NjViZmE1ZGY2NmQ5MTQ4YWEzMzg2ZTZkMjg0Njg1ODE0NzY0OGZjMTRlYmZkZTE4MDE0ZDFlOGM2Zjc0MzA1NTQxZjY5ZTlkMmIzOWM2NTlhM2Y0MTZiYTg5M2Q4OTI1Y2YwMDE5ZGM2Zjc2YjE5NDI2Y2FhMzVkN2Y4MDUzY2RlMDQ1ZmRiMWJhMzYxNjdlNWIzNzAyNDZiNjUxN2Q1NmI3OWU0YTljMTJjMTg5MmU4OTRlMDE2MTNkY2I5ZTM3ZTBlNmRiY2YwOGUwZTcwMDExMDQ0MWM5MmE5YmVjMDU0NTUxNzIyODI4Y2Y4NTJiYWJmODIxNmNmYjU3OTQ4MDAzODQ4YmViNDNkZWRlYzkyY2UyZTUwODU5ZWI5N2FlODQwMWZjMGY4NjUyMDVmN2U0M2NhOWY3MDQ4NTY1MzJiYzQ5MmRiOGIzMjA0NWI5ZWZiYTdiNDFlNzE0NGIxNWI1NzY1MDk5Nzk5OTY0ZDc2Y2Q1ZmZiNTU3NGMyMWFjMTk5YTRmZDE1OGU3YTFmNzRjNTIwOTdjNjBmYmMyOTEyYmFiMDE2NTIwYmVhZjg1YjA1MGQ1ZDk4Y2E5YThjNmQyNjI5ZjEzNmY4OTc2YmM0N2Q5NzEyYzgyZWRhOTc1OTRmMmI3MzZjOGUwZmZlMWEwNWY2NzZiODM3YTU5NzMzNDczNjRiMGUxZDk5NjRkMDNjNzhiNzBiNzMwNWQyOTk1ZWRkNjdjMTRkMDY3ZGRlNzBhZTU0NGU4NDU0ZGM5MDI0NjEzOWRiZjljYTU5OGY1MDlmNmRhYjcxNDM4NTc5MGI5ZDA3NjVhZWE2MTdkNTYxYTIwOTljNzZhN2M2OTdhOGM4Zjk1NDA0Njc0NWQzOThjMGFhM2ZhNWIwN2ZiOGNmNDYzNDg0MGZjMGRiNzgwY2JhNTUyODc4N2U2YTg1OTgxNzNmOTc5ZTRmOGRiZDExZmM0MzBhMGFkNWNlNWVlZDM4NmY4NWM5MGZjN2QwMmEwMmViYjM4NmY3NDE1YTdhNjRjMzk4ZTk0NDBjYWViOTYyYjQ1Mjk0OTE4YTVhMmY5MTM0MDRmYzMxZTdlZTc1YmE1Mjg5ZjcyYTkzMTJmMjFmNzAxODlmMTc2ZTk1Yjk1YzllNTY2MTljNjMxYjliOWVmMGY4MWViNmFmMmE0Y2VlMzk1YjJkNzA2ODMzNjg4ZDNhMzhmMDY4ZGRiN2EwZDU0ODY5OWM5NGQ3ZDJhZjE1MWU1ZTJmMjlhMWUyOGE1Y2M4YzIyM2NhOGQxYTc4MTdiZjEwNmNmMTU5ZDgwMzRmZmM1MGJhZGY2YjAwMTFjODg0NWZjZjBjNTM0YWQyMWRiN2IyNTM2YzI5ODdmMWFkNmE0NTQ2ZTI5MTY5ZmJlOTVmM2QzZDY4NTgzMmVmMjE3Mjg4OWQ2ODI2MTcyYmNlNWIzNzlmNTZmMjJiNA==
      - TEST_USER_RSA_PUBLIC_KEY=N2IyMjYxNmM2NzIyM2EyMjUyNTM0MTJkNGY0MTQ1NTAyZDMyMzUzNjIyMmMyMjY1MjIzYTIyNDE1MTQxNDIyMjJjMjI2NTc4NzQyMjNhNzQ3Mjc1NjUyYzIyNmI2NTc5NWY2ZjcwNzMyMjNhNWIyMjY1NmU2MzcyNzk3MDc0MjI1ZDJjMjI2Yjc0NzkyMjNhMjI1MjUzNDEyMjJjMjI2ZTIyM2EyMjM1NTIzMzY0NTc1MzY2NTY0NzM3NzE0ZTVmMzQ0ZjQyNDk0YTZlMmQ0ZTM0NTY0ODQ3NDk0YzM4NzczMTM2NTI3NTJkNDQ3OTM3NDk3NDYyNjEzOTZlNzQ3MjRjNjQ2YzY5NTM2NTQzNzM0OTY3NDczMzMxNTU2NjRhNTY2MzRjNjczMTcyNTM2YjMwNmY2MzU4Njg3OTM3MzY1ODQyNTU0MjQxNmI0YzQxNGEzNTc3Nzk3MTQ5NmY2NjU5NmE1MjcxMzA3YTU3NmM2NTczNWY2OTYzNTc2ZDQ5NDI2YzRiNjk3MjRiNmQzNTQ4MzI1NzU0MzE2MTMyNmQ0MzZiNGU2YjQ0Nzc2ODU0Nzc2ODc1NzYzMjc5NjI1NzY0NTA1NzM3NDM2ODZjNmQ0ZjZkNTgzNDQ4NTYzOTYzNmI3NTZiNTc0ZjM3NmIzNzYxNGU3NTQ0NmY1MzczNjI3OTYxNjg1MDZlNTIzNTRlNmQ0ZjU3NjQ0NjM5NzMzNzUwMzc2ODYyNzA3NTQ3Nzc2ZjRhNGM2ZTc1NzYzMzYzNDU2ZjUzNjY2MzY5NjI0ZDQzMzQ1NDMwNGM1MzUyNDk2YzM5NjE0MjMxNDY3NTVmMzY2NTczNzM3NDc3MmQ1NzUyNDk0ZTM4NDkyZDU4NzQzOTU2NzUzMjQyMzY2NjQ5NzE2ODM4NzE0ODZmNjI3MTU0NGI2NzQ1NzM1YTQ2NmEzNTU4MzY1Mzc3NmU2YzQ3Nzc0ZjRkNTAzMTU5MzM2ZDczNTE0ODY2NjE2Nzc1MzE2YjRhMmQ1MTMxNTg0YjcwNjU0NTZiNWY0MjczNjIzMDRhNjU1ODVhNTk1NTZjNjIzNDZiMzk2NjQ4NzgzMTQ1NTQ0ZjU2Nzk0ZDM4MzczNzQ4NTE2YTZlNzM1OTY5NjQ3NTQ2Nzk1NTZhMzk2NTZlNjQ1ODRlN2EzNzQ0NDY2NjQ5NTg0NTYxNjc3NDc5NjE0NzU3NGY2YTQ4Njc2NjU5Mzc3NTY0NTk0NjM0NGM2OTY1NDQ0NDU1NWE1MTYyNzE0ZDMwNGM2NDRlNGU3MjM4NWE3NzM4NDQ2ZTc1NDY0ZDYxNGI0NjY0NGQ3ODQyNzA1NzUwNDE3MzY3Njk2NDM1NjU1ODZmNTk2OTQ5NTg2MjU3NTE0MzM4NWY3YTM3MzQ0OTQxNGU1MzRiNzg2MTU4NGI0MzM1NGM3OTUxMzI0ODc2N2EzNTdhNTM1ODM0NDQzNDY2N2E0NDQ2MzU1ZjJkNTQ1NjRkNjM3MDZiNDk3NDM2NzI1MDcxMzU2MTY5NWE3NDM1NmQ2NjM0NmI2YjMxNmI1MDRjNTI1MzM5NzM3NTQ1MzY0Nzc3NzE1NjU0NmI3OTQxNDY3NDc4NjM0NDcwMzU2OTc1NDk1ZjJkMzU0YjUyNzQ0NjZlNjE2ODZkNDEzOTQyMzY0NzRmNmE2NTVhNTM1MTYyNTM2OTYyNGM1Mzc4NDY0ZTM3NDU3NzRiNmQ2ZjRkNDM1NTRkNTIzMzQ5NDY3MDYyNTkzNTVhNzU3MDY1NDE1NDZkNjkzMzZhNDI0NzU1MzQ0OTZlNmI3MzUzMzQ3NjY4MzAyZDMzNDQ1ODdhNTEyZDdhNTMzNjM2Njg1NDQ3MzI2NzU0NTc0ZjM0NjI1Njc0MzM2MTQ3Nzk0MzVmMzg2NTQ2NjI3NzY1NmI2NDRiMzY2YzMxMzg1MjZhNjM1NjUzNDM3MjM5MzUzMTc1MzE0ZDcyMzI1NzQyNTU2YzMxNGMzMjYxNjQzMTc3NzU1MDcwNWE0ZjU1NTk0ODZjNjY3NDY2MzE3NzQxNmY3OTM3NDIzMTZlNDUyMjdk
      # Security.
      - ES256_PRIVATE_KEY_PATH=mp/jwt/tests/resources/keys/private_key.pem
      - ES256_PUBLIC_KEY_PATH=mp/jwt/tests/resources/keys/public_key.pem
      - DB_SYMMETRIC_KEY=IFdjlMcWEjpswSDoOhiEhsQXugioBs_Pbg5z1J8G91U=
      # Cloudflare.
      - CF_ENABLE_TURNSTILE_INTEGRATION=False
      # If CF_ENABLE_TURNSTILE_INTEGRATION is enabled you need to provide value for these variables.
      # - CF_TURNSTILE_CHALLENGE_API=https://challenges.cloudflare.com/turnstile/v0/siteverify
      # For more secret keys, see: https://developers.cloudflare.com/turnstile/troubleshooting/testing/#dummy-sitekeys-and-secret-keys
      # - CF_TURNSTILE_SECRET_KEY=1x0000000000000000000000000000000AA
    volumes:
      - .:/code
      - mellonpass-tmp:/tmp
    ports:
      - "8000:8000"
    depends_on:
      - mellonpass_db
    networks:
      - mellonpass-network
    command: /start_web

  mellonpass_db:
    image: postgres:15-alpine
    container_name: mellonpass_db
    ports:
      - 5432:5432
    environment:
      - POSTGRES_HOST=postgres
      - POSTGRES_DB=postgres
      - POSTGRES_USER=postgres
      - POSTGRES_PASSWORD=postgres
      - POSTGRES_PORT=5432
    volumes:
      - mellonpass-postgres-data:/var/lib/postgresql/data
    networks:
      - mellonpass-network

  mellonpass_huey_consumer:
    <<: *mellonpass_server
    container_name: mellonpass_huey_consumer
    depends_on:
      - mellonpass_server
    ports: []
    volumes:
      - .:/code:ro
      - mellonpass-tmp:/tmp
    command: /start_huey_consumer
    networks:
      - mellonpass-network
